<app-header></app-header>
<div class="container mt-4">
    <!-- <div class="d-flex justify-content-end">
        <button class="btn btn-primary ms-auto" (click)="sortByName()">
            Sort by Name
        </button>
    </div> -->
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createDepartmentModal">
        Add Department
      </button>
  <div class="container-fluid border border-top-0">
    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th *ngFor="let column of columnTable ">
              {{ column | titlecase }}
            </th>
          </tr>
        </thead>
        <tbody>
            <tr *ngFor="let user of data | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage, totalItems: totalElements }">
              <td *ngFor="let column of columnTable">
                <ng-template #normalValue>
                  {{ user[column] ? user[column] : "N/A" }}
                </ng-template>
              </td>
              <!-- Delete Button (Click to Show Popup) -->
              <td class="text-end">
                <button class="btn btn-sm btn-danger" (click)="showDeletePopup(user.id, $event)">ðŸ—‘</button>
              </td>
            </tr>
          </tbody>
          
      </table>
    </div>
  </div>
  <div class="d-flex justify-content-between align-items-center">
    <pagination-controls (pageChange)="onPageChange($event)" class="mt-3 d-flex justify-content-center">
    </pagination-controls>
  </div>
</div>
<!-- <div *ngIf="popupUserId" class="delete-popup">
  <p>Are you sure?</p>
  <button class="btn btn-sm btn-danger" (click)="deleteUser(popupUserId)">Yes</button>
  <button class="btn btn-sm btn-secondary" (click)="popupUserId = null">No</button>
</div> --><!-- Button to Open Modal -->
  
  <!-- Modal -->
  <div class="modal fade" id="createDepartmentModal" tabindex="-1" aria-labelledby="createDepartmentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="createDepartmentModalLabel">Create Department</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        
        <div class="modal-body">
          <form [formGroup]="departmentForm" (ngSubmit)="submitForm()">
            <div class="mb-3">
              <label for="name" class="form-label">Department Name</label>
              <input id="name" formControlName="name" class="form-control" type="text" required />
            </div>
            
            <div class="mb-3">
              <label for="branchId" class="form-label">Branch</label>
              <select id="branchId" formControlName="branchId" class="form-control" required>
                <!-- <option *ngFor="let branch of branches" [value]="branch.id">{{ branch.name }}</option> -->
              </select>
            </div>
            
            <!-- <button type="submit" class="btn btn-success" [disabled]="departmentForm.invalid">
              Save
            </button> -->
          </form>
        </div>
      </div>
    </div>
  </div>
  